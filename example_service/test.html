<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <link type="text/css" href="/css/bootstrap.css" rel="stylesheet" />
    <link rel="stylesheet" href="/css/idangerous.swiper.css">
    <link type="text/css" href="/css/typo.css" rel="stylesheet" />
    <link href="https://g.alicdn.com/sj/qnui/1.3.0/css/sui.min.css" type="text/css" rel="stylesheet">
    <link type="text/css" href="/css/peter.css" rel="stylesheet" />
    <link type="text/css" href="/css/github-markdown.css" rel="stylesheet" />
    <link type="text/css" href="/css/google-code/desert.css" rel="stylesheet" />
    <title>coral's corner</title>
    <script src="/js/jquery-3.1.1.js"></script>
    <script src="/css/google-code/prettify.js"></script>
    <link rel="manifest" href="/manifest.json" />
</head>

<body class="sui-form skin_74b9e1" style="padding:40px;">
    <div style="margin-top:30px;margin-bottom: 20px;">
        <button id="btn" style="width:400px;height:50px;font-size:24px;">添加至主屏幕</button>
        <button id="btnUpdate" style="width:400px;height:50px;font-size:24px;">更新sw</button>
    </div>
    <img src="https://img.alicdn.com/imgextra/i3/1641711921/O1CN01qk7pju1Q3rLk3TKzU_!!1641711921.jpg" alt="">
    <script type="text/javascript" src="/example_service/offline-sw.js"></script>
</body>
<script>
    // // 取消添加到主屏幕
    // window.addEventListener('beforeinstallprompt', function (e) {
    //     e.preventDefault();
    //     return false;
    // });

    // // 添加到主屏幕后响应
    // window.addEventListener('beforeinstallprompt', function (event) {
    //     event.userChoice.then(result => {
    //         console.log(result);
    //         // {outcome: "dismissed", platform: ""} // 取消添加
    //         // {outcome: "accepted", platform: "web"} // 完成添加
    //     });
    // });

    // 手动添加，要等到符合规格后才能起效
    // let savedPrompt = null; // 用来保存 事件
    // const btn = document.getElementById('btn');
    // // 添加到主屏幕后响应
    // window.addEventListener('beforeinstallprompt', function (e) {
    //     e.preventDefault();
    //     savedPrompt = e;
    //     return false;
    // });
    // btn.addEventListener('click', function () {
    //     if (savedPrompt) {
    //         // 异步触发横幅显示，弹出选择框，代替浏览器默认动作
    //         savedPrompt.prompt();
    //         // 接收选择结果
    //         savedPrompt.userChoice.then(result => {
    //             console.log(result);
    //         });
    //     }
    // });

</script>

</html>